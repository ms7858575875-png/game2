<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ù…Ø³Ø§Ø¨Ù‚Ø© - Ù†Ø¹ÙˆÙ…Ø© Ù†Ø¹ÙˆÙ…ØªÙƒ</title>
<style>
:root {
  --bg: #fff0f8;
  --card: #ffffff;
  --accent: #ff6fa3;
  --accent-2: #ffd9ec;
  --text: #2b2b2b;
}
* { box-sizing: border-box; font-family: "Tajawal", sans-serif; }
body { background: linear-gradient(180deg, var(--bg), #fff); min-height: 100vh; margin:0; padding:24px; display:flex; align-items:center; justify-content:center; }
.container { width:100%; max-width:820px; }
.card { background: var(--card); border-radius:18px; padding:22px; box-shadow: 0 8px 30px rgba(0,0,0,0.07); animation: fadeIn 0.7s ease; }
@keyframes fadeIn { from {opacity:0; transform: scale(0.9);} to {opacity:1; transform: scale(1);} }
h1 { margin:6px 0 12px; color: var(--accent); font-size:22px; }
p.lead { margin:0 0 14px; color:var(--text); opacity:0.9; }
label { display:block; margin:10px 0 6px; font-weight:600; color:var(--text); }
input[type=text] { width:100%; padding:12px; border-radius:10px; border:1px solid #eee; background: var(--accent-2); transition: all 0.2s; }
input[type=text]:focus { border-color: var(--accent); background:#fff; outline:none; }
button { background: var(--accent); color:white; padding:10px 14px; border:none; border-radius:10px; font-weight:700; cursor:pointer; transition:0.2s; }
button:hover { transform: scale(1.05); }
.muted { color:#666; font-size:13px; }
.hidden { display:none; }
.question { padding:12px; border-radius:12px; border:1px dashed #f3cde0; margin-bottom:10px; }
.options { display:flex; flex-direction:column; gap:8px; margin-top:8px; }
.opt { padding:10px; border-radius:10px; background:#fff; cursor:pointer; border:1px solid #f2f2f2; }
.opt:hover { background: var(--accent-2); }
.opt input { margin-left:8px; }
.timer { font-weight:800; color:var(--accent); }

#welcomeMessage { background: var(--accent-2); padding:14px; border-radius:12px; margin-top:15px; color: var(--accent); font-weight:600; text-align:center; display:none; animation: slideDown 0.7s ease; }

#violationCard { position: fixed; top:50%; left:50%; transform: translate(-50%, -50%); background: linear-gradient(135deg,#ff6fa3,#ffd9ec); color:#fff; text-align:center; padding:40px 30px; border-radius:25px; box-shadow:0 10px 40px rgba(0,0,0,0.25); font-size:20px; width:90%; max-width:500px; z-index:9999; }
#violationCard h1, #violationCard p { margin-bottom:20px; }
#violationClose { background:#fff;color:#ff6fa3;border:none;padding:10px 20px;border-radius:10px;cursor:pointer;font-weight:700; }
#violationClose:hover { transform: scale(1.1); background:#ffe6f0; }

@keyframes slideDown { from{opacity:0; transform:translateY(-30px);} to{opacity:1; transform:translateY(0);} }

#resultCard {
  background: linear-gradient(135deg,#ff6fa3,#ffd9ec);
  color:white;
  text-align:center;
  box-shadow:0 10px 40px rgba(0,0,0,0.3);
  border-radius:20px;
  padding:30px;
  animation: slideDown 0.7s ease;
}
#resultCard h1 { font-size:26px; margin-bottom:15px; }
#resultCard .result { font-size:22px; font-weight:700; margin-bottom:20px; }
#resultCard button { background:white; color:#ff6fa3; padding:10px 18px; border:none; border-radius:12px; font-weight:700; cursor:pointer; transition:0.3s; }
#resultCard button:hover { transform: scale(1.1); background:#ffe6f0; color:#ff6fa3; }

</style>
</head>
<body>
<div class="container">

<!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
<div class="card" id="welcomeCard">
  <h1>ğŸŒ¸ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨ÙƒÙ ÙÙŠ Ø¹Ø§Ø¦Ù„Ø© "Ù†Ø¹ÙˆÙ…Ø© Ù†Ø¹ÙˆÙ…ØªÙƒ" ğŸŒ¸</h1>
  <p class="lead">Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ ÙˆØ§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ù„ØªØ¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±. Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‡Ùˆ <strong>Ù†Ø¹ÙˆÙ…Ø©4</strong>.</p>
  <label>Ø§Ù„Ø§Ø³Ù…</label>
  <input id="nameInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§">
  <label>Ø§Ù„Ø±Ù…Ø²</label>
  <input id="codeInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ù…Ø² Ù‡Ù†Ø§">
  <button id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
  <div id="welcomeMessage"></div>
</div>

<!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
<div class="card hidden" id="quizCard">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <div>
      <strong id="playerName"></strong>
      <div class="muted">Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: <span id="playerCode"></span></div>
    </div>
    <div class="timer" id="timer">05:00</div>
  </div>
  <hr>
  <div id="questionsArea"></div>
  <button id="finishBtn">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
</div>

<!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© -->
<div class="card hidden" id="resultCard">
  <h1>âœ¨ Ù†ØªÙŠØ¬ØªÙƒ âœ¨</h1>
  <p class="result" id="resultSummary"></p>
  <div style="display:flex;gap:10px;margin-top:10px; justify-content:center;">
    <button id="copyBtn">Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
    <button id="closeBtn">Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ø¹Ø§Ø¦Ù„ØªÙƒ</button>
  </div>
</div>

<!-- Ø¨Ø·Ø§Ù‚Ø© Ù…Ø®Ø§Ù„ÙØ© Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ -->
<div id="violationCard" class="hidden">
  <h1>ğŸš« Ù…Ø®Ø§Ù„ÙØ© Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ ğŸš«</h1>
  <p id="violationMessage"></p>
  <button id="violationClose">Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ø¹Ø§Ø¦Ù„ØªÙƒ</button>
</div>

<script>
const QUESTIONS = [
  {q:'Ù…Ù† Ù‚Ø§Ù„: "Ù„Ø§ ÙŠØ¤Ù…Ù† Ø£Ø­Ø¯ÙƒÙ… Ø­ØªÙ‰ ÙŠØ­Ø¨ Ù„Ø£Ø®ÙŠÙ‡ Ù…Ø§ ÙŠØ­Ø¨ Ù„Ù†ÙØ³Ù‡"ØŸ',opts:['Ø§Ù„Ù†Ø¨ÙŠ ï·º','Ø£Ø¨Ùˆ Ø¨ÙƒØ±','Ø¹Ù…Ø±','Ø¹Ø«Ù…Ø§Ù†'],a:0,type:'choice'},
  {q:'Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­Ø¯ÙŠØ« Ø§Ù„Ø°ÙŠ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ "Ù…Ù† Ù„Ø§ ÙŠØ´ÙƒØ± Ø§Ù„Ù†Ø§Ø³ Ù„Ø§ ÙŠØ´ÙƒØ± Ø§Ù„Ù„Ù‡"ØŸ',opts:['Ø­Ø¯ÙŠØ« Ù†Ø¨ÙˆÙŠ','Ø­Ø¯ÙŠØ« ØµØ­Ø§Ø¨ÙŠ','Ø­Ø¯ÙŠØ« ØªØ§Ø¨Ø¹ÙŠ','Ø­Ø¯ÙŠØ« Ø¶Ø¹ÙŠÙ'],a:0,type:'choice'},
  {q:'Ø£ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ« Ø¹Ù† ÙØ¶Ù„ Ø§Ù„ØµØ¯Ù‚Ø©ØŸ',opts:['Ù…Ù† ØªØµØ¯Ù‚...','Ù…Ù† ØµØ§Ù… Ø±Ù…Ø¶Ø§Ù†...','Ù…Ù† Ù‚Ø±Ø£ Ø§Ù„Ù‚Ø±Ø¢Ù†...','Ù…Ù† Ø³Ù…Ø¹ Ø§Ù„Ø¹Ù„Ù…...'],a:0,type:'choice'},
  {q:'Ù…Ø§ Ù‡ÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†ÙØ³ÙŠ Ø§Ù„ØªÙŠ ØªÙ‚ÙˆÙ„ "Ù†Ø­Ù† Ù†Ù…ÙŠÙ„ Ø¥Ù„Ù‰ ØªØ°ÙƒØ± Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„Ø³Ù‡Ù„Ø©"ØŸ',opts:['Ø§Ù„ØªØ­ÙŠØ² Ø§Ù„Ù…Ø¹Ø±ÙÙŠ','Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ø¦ÙŠØ©','Ø§Ù„Ø§Ù†Ø·Ø¨Ø§Ø¹ Ø§Ù„Ø£ÙˆÙ„','Ø§Ù„ØªÙ…Ø«ÙŠÙ„ Ø§Ù„Ø°Ù‡Ù†ÙŠ'],a:1,type:'choice'},
  {q:'Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´Ø¹ÙˆØ± Ø§Ù„Ù†Ø§ØªØ¬ Ø¹Ù† Ù…Ù‚Ø§Ø±Ù†Ø© Ù†ÙØ³Ùƒ Ø¨Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŸ',opts:['Ø§Ù„ØºÙŠØ±Ø©','Ø§Ù„Ø±Ø¶Ø§','Ø§Ù„Ø­Ø¨','Ø§Ù„Ø®ÙˆÙ'],a:0,type:'choice'},
  {q:'Ø£ÙŠ Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ø·Ø±Ù‚ ØªØ³Ø§Ø¹Ø¯ Ø¹Ù„Ù‰ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ØªÙˆØªØ± Ø§Ù„Ù†ÙØ³ÙŠØŸ',opts:['Ø§Ù„ØªÙ†ÙØ³ Ø§Ù„Ø¹Ù…ÙŠÙ‚','Ø§Ù„Ø¬Ù„ÙˆØ³ Ø¨Ø¯ÙˆÙ† Ù‡Ø¯Ù','ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±','Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø³Ù„Ø¨ÙŠ'],a:0,type:'choice'},
  {q:'Ù…Ø§ Ù‡ÙŠ Ø£Ù‡Ù… Ø®Ø·ÙˆØ© Ù„Ù„Ø¹Ù†Ø§ÙŠØ© Ø¨Ø§Ù„Ø¨Ø´Ø±Ø© ÙŠÙˆÙ…ÙŠÙ‹Ø§ØŸ',opts:['ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø©','ÙˆØ¶Ø¹ Ø§Ù„Ù…ÙƒÙŠØ§Ø¬','Ø¹Ø¯Ù… Ø§Ù„Ù†ÙˆÙ…','Ø§Ù„Ø­Ù…ÙŠØ© ÙÙ‚Ø·'],a:0,type:'choice'},
  {q:'Ø£ÙŠ Ø¹Ù†ØµØ± ÙŠØ³Ø§Ø¹Ø¯ Ø¹Ù„Ù‰ Ø¥Ø´Ø±Ø§Ù‚ Ø§Ù„Ø¨Ø´Ø±Ø©ØŸ',opts:['ÙÙŠØªØ§Ù…ÙŠÙ† C','Ø§Ù„Ø¯Ù‡ÙˆÙ† Ø§Ù„Ù…Ø´Ø¨Ø¹Ø©','Ø§Ù„Ø³ÙƒØ±ÙŠØ§Øª','Ø§Ù„ÙƒØ§ÙÙŠÙŠÙ†'],a:0,type:'choice'},
  {q:'Ù…Ø§ Ø£ÙØ¶Ù„ ÙˆÙ‚Øª Ù„ÙˆØ¶Ø¹ ÙˆØ§Ù‚ÙŠ Ø§Ù„Ø´Ù…Ø³ØŸ',opts:['Ù‚Ø¨Ù„ Ø§Ù„ØªØ¹Ø±Ø¶ Ù„Ù„Ø´Ù…Ø³','Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø±Ø¶ Ù„Ù„Ø´Ù…Ø³','ÙˆÙ‚Øª Ø§Ù„Ù†ÙˆÙ…','Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªØ­Ù…Ø§Ù… Ù…Ø¨Ø§Ø´Ø±Ø©'],a:0,type:'choice'},
  {q:'Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠØ¬Ø¹Ù„ ÙˆØ¬Ù‡Ùƒ ÙŠØ´Ø¹ Ø¨Ø§Ù„Ù†ÙˆØ±ØŸ',answer:['Ù†Ù‚Ø§Ø¡ Ø§Ù„Ù‚Ù„Ø¨','Ø­Ø¨ Ø§Ù„Ù„Ù‡','Ø°ÙƒØ± Ø§Ù„Ù„Ù‡','Ø­Ø¨ Ù…Ø®Ù„ÙˆÙ‚Ø§ØªÙ‡','Ø§Ù„ØµÙ„Ø§Ø©'],type:'text'}
];

const welcomeCard=document.getElementById('welcomeCard');
const quizCard=document.getElementById('quizCard');
const resultCard=document.getElementById('resultCard');
const nameInput=document.getElementById('nameInput');
const codeInput=document.getElementById('codeInput');
const startBtn=document.getElementById('startBtn');
const questionsArea=document.getElementById('questionsArea');
const finishBtn=document.getElementById('finishBtn');
const resultSummary=document.getElementById('resultSummary');
const playerName=document.getElementById('playerName');
const playerCode=document.getElementById('playerCode');
const copyBtn=document.getElementById('copyBtn');
const closeBtn=document.getElementById('closeBtn');
const welcomeMessage=document.getElementById('welcomeMessage');
const violationCard=document.getElementById('violationCard');
const violationMessage=document.getElementById('violationMessage');
const violationClose=document.getElementById('violationClose');

let timerInterval,timeLeft=300;

function loadAttempts(){try{return JSON.parse(localStorage.getItem('nn_attempts')||'{}');}catch(e){return {}}}
function saveAttempt(code,data){const a=loadAttempts();a[code]=data;localStorage.setItem('nn_attempts',JSON.stringify(a));}
function hasAttempt(code){return loadAttempts().hasOwnProperty(code);}
function saveNameCode(name,code){localStorage.setItem('nn_name',name); localStorage.setItem('nn_code',code);}

document.addEventListener('keydown',function(e){if(e.key==="PrintScreen"){e.preventDefault(); alert("Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ø®Ø° Ø³ÙƒØ±ÙŠÙ† Ù„Ù„Ø¹Ø¨Ø©!");}});

function showViolation(name,message){
  violationMessage.textContent = message;
  violationCard.classList.remove('hidden');
}

startBtn.onclick = () => {
  const name = nameInput.value.trim();
  const code = codeInput.value.trim();
  if (!name) { alert('ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù….'); return; }
  if (code !== 'Ù†Ø¹ÙˆÙ…Ø©4') { alert('Ø§Ù„Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­ âŒ'); return; }

  if (hasAttempt(code)) {
    showViolation(name, `ğŸš« Ø¹Ø°Ø±Ù‹Ø§ ${name}ØŒ Ù„Ù‚Ø¯ Ø§Ø³ØªØ®Ø¯Ù…Øª Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù…Ø³Ø¨Ù‚Ù‹Ø§ âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©.`);
    return;
  }

  welcomeMessage.style.display = "block";
  welcomeMessage.textContent = `ğŸŒ· Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ ${name}! Ø³Ø±Ø±Ù†Ø§ Ø¨Ø§Ù†Ø¶Ù…Ø§Ù…Ùƒ Ø¥Ù„Ù‰ Ø¹Ø§Ø¦Ù„Ø© Ù†Ø¹ÙˆÙ…Ø© Ù†Ø¹ÙˆÙ…ØªÙƒ ğŸ’–`;
  saveNameCode(name, code);

  setTimeout(() => { beginQuiz(name, code); }, 2000);
};

function beginQuiz(name,code){
  welcomeCard.classList.add('hidden');
  quizCard.classList.remove('hidden');
  playerName.textContent=name;
  playerCode.textContent=code;
  renderQuestions();
  timeLeft=300;
  document.getElementById('timer').textContent='05:00';
  timerInterval=setInterval(()=>{
    timeLeft--;
    const min=String(Math.floor(timeLeft/60)).padStart(2,'0');
    const sec=String(timeLeft%60).padStart(2,'0');
    document.getElementById('timer').textContent=`${min}:${sec}`;
    if(timeLeft<=0){finishTest(name,code);}
  },1000);
}

function renderQuestions(){
  questionsArea.innerHTML='';
  QUESTIONS.forEach((q,i)=>{
    const div=document.createElement('div'); div.className='question';
    div.innerHTML=`<div><strong>Ø³Ø¤Ø§Ù„ ${i+1}:</strong> ${q.q}</div>`;
    if(q.type==='choice'){
      const opts=document.createElement('div'); opts.className='options';
      q.opts.forEach((o,j)=>{
        const lbl=document.createElement('label'); lbl.className='opt';
        lbl.innerHTML=`<input type='radio' name='q${i}' value='${j}'> ${o}`;
        opts.appendChild(lbl);
      });
      div.appendChild(opts);
    }else if(q.type==='text'){
      const input=document.createElement('input'); input.type='text'; input.name='q'+i; input.placeholder='Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§';
      div.appendChild(input);
    }
    questionsArea.appendChild(div);
  });
}

finishBtn.onclick=()=>{finishTest(playerName.textContent,playerCode.textContent);};

function finishTest(name,code){
  clearInterval(timerInterval);
  let score=0;
  QUESTIONS.forEach((q,i)=>{
    if(q.type==='choice'){
      const sel=[...document.getElementsByName('q'+i)].find(e=>e.checked);
      if(sel && parseInt(sel.value)===q.a) score+=10;
    } else if(q.type==='text'){
      const val=document.getElementsByName('q'+i)[0].value.trim();
      let matches=0;
      q.answer.forEach(ans=>{ if(val.includes(ans)) matches++; });
      if(matches===q.answer.length) score+=10;
    }
  });

  quizCard.classList.add('hidden'); resultCard.classList.remove('hidden');

  resultSummary.innerHTML=`<strong>${name}</strong><br>Ø­ØµÙ„Øª Ø¹Ù„Ù‰ <strong>${score} Ù…Ù† ${QUESTIONS.length*10}</strong> Ù†Ù‚Ø·Ø©.<br>ğŸ’– Ù…Ø¨Ø§Ø±Ùƒ Ù„Ùƒ Ø¹Ù„Ù‰ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±!`;

  saveAttempt(code,{name,score,date:new Date().toISOString()});
}

copyBtn.onclick=async()=>{
  try{ await navigator.clipboard.writeText(resultSummary.textContent); alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø©!'); }
  catch(e){ alert('Ø§Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙŠØ¯ÙˆÙŠÙ‹Ø§.'); }
};

closeBtn.onclick = () => { window.location.href='https://www.facebook.com/profile.php?id=61581366775114'; };
violationClose.onclick=()=>{ window.location.href='https://www.facebook.com/profile.php?id=61581366775114'; };

window.addEventListener('load',()=>{
  const storedName=localStorage.getItem('nn_name');
  const storedCode=localStorage.getItem('nn_code');
  const attempts=loadAttempts();
  if(storedName && storedCode && attempts[storedCode]){
    welcomeCard.classList.add('hidden');
    quizCard.classList.add('hidden');
    resultCard.classList.add('hidden');
    showViolation(storedName, `ğŸš« Ø¹Ø°Ø±Ù‹Ø§ ${storedName}ØŒ Ù„Ù‚Ø¯ Ø§Ø³ØªØ®Ø¯Ù…Øª Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ù…Ø³Ø¨Ù‚Ù‹Ø§ âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©.`);
  }
});

nameInput.addEventListener("keypress", e => {if(e.key==="Enter") startBtn.click();});
codeInput.addEventListener("keypress", e => {if(e.key==="Enter") startBtn.click();});
</script>
</body>
</html>
